
<html lang="en">
        <% include style/mainStyle %>
        <% include style/table %>  
        <% include style/importChunks %>  
        <head>
            <% include style/head %>
        </head>
    
        <body>
            <div id="rangeInputContainer">
                    <div><span id="inb4info">Step: </span><span id="currentStepNumber">0</span></div><br />
                    <span id="rangeInputBar">0<input type="range" id="currentStep" name="rangeInput" value="0" min="0" max="<%- solution.solution.length %>" onchange="updateCurrentStep(this.value);"><%- solution.solution.length %></span>
                </div>
                
                <br />
                <canvas id="levelPreview" width="1280" height="720"></canvas>
                <br/>
            Details of the current solution:
            <br />
            <div id="details"></div>
            <script>
                let solution = <%- JSON.stringify(solution) %>;
                let solutionDetails = document.getElementById("details");
                solutionDetails.innerHTML += "<span><span id='inb4info'>Name of the level set: </span>" + solution.fileName + "</span><br \>";
                solutionDetails.innerHTML += "<span><span id='inb4info'>Level ID in the dataset: </span>" + solution.levelIndex + "</span><br \>";
                solutionDetails.innerHTML += "<span><span id='inb4info'>Method used to solve the level: </span>" + solution.method + "</span><br \>";
                if (solution.arguments.length) {
                    solutionDetails.innerHTML += "<span><span id='inb4info'>Submethod used: </span>" 
                    switch(solution.arguments) {
                        case 'as':
                            solutionDetails.innerHTML += "Any Solution";
                            break;
                        case 'po':
                            solutionDetails.innerHTML += "Push Optimal";
                            break;
                        case 'pm':
                            solutionDetails.innerHTML += "Pushes Moves";
                            break;
                        case 'mp':
                            solutionDetails.innerHTML += "Moves Pushes";
                            break;
                        case 'e':
                            solutionDetails.innerHTML += "Evolutionary";
                            break;
                        case 'bfs':
                            solutionDetails.innerHTML += "BFS";
                            break;
                    }
                    solutionDetails.innerHTML += "</span><br \>";
                }
                solutionDetails.innerHTML += "<span><span id='inb4info'>Solving date: </span>" + solution.startDate + "</span><br \>";
                if (solution.solution.length) {
                    solutionDetails.innerHTML += "<span><span id='inb4info'>Solution string: </span><br /><span id='solutionStringText'>" + solution.solution + "</span></span></br>";
                    solutionDetails.innerHTML += "<span><span id='inb4info'>Moves/Pushes taken: </span>" + solution.solution.length + "/" + solution.solution.match(/[A-Z]/g).length +"</span><br \>";
                    solutionDetails.innerHTML += "<span><span id='inb4info'>Time taken to solve the level: </span>" + Math.round(solution.milisecondsTaken)/1000 + "s</span><br \>";
                    let level = solution.level;
                    let solutionString = solution.solution;
                    let details = true;
                    <% include scripts/drawingCanvas %>
                    <% include scripts/calculatingAllSteps %>
                    <% include scripts/updateCurrentStep %>
                } else {
                    solutionDetails.innerHTML += "<span><span id='inb4info'>Timed out after: </span>" + Math.round(solution.milisecondsTaken)/1000 + "s</span><br \>";
                    solutionDetails.innerHTML += "<span id='inb4info'>Level was not solved.</span>";
                    document.getElementById("rangeInputContainer").remove();
                    document.getElementById("levelPreview").remove();
                }
            </script>
        </body>
    </html>